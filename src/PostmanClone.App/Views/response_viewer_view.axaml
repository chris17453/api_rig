<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:PostmanClone.App.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="400"
             x:Class="PostmanClone.App.Views.response_viewer_view"
             x:DataType="vm:response_viewer_view_model">

    <Grid RowDefinitions="Auto,*">
        <!-- Status Bar -->
        <Border Grid.Row="0" 
                Padding="16,12"
                Background="#21262D"
                CornerRadius="8,8,0,0"
                Margin="12,12,12,0"
                IsVisible="{Binding HasResponse}">
            <StackPanel Orientation="Horizontal" Spacing="16">
                <!-- Status Badge -->
                <Border Background="#238636" 
                        CornerRadius="6" 
                        Padding="12,6">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="{Binding StatusCode}"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Foreground="#FFFFFF"/>
                        <TextBlock Text="{Binding StatusDescription}" 
                                   Foreground="#FFFFFF"
                                   Opacity="0.8"
                                   FontSize="12"/>
                    </StackPanel>
                </Border>
                
                <!-- Time -->
                <Border Background="#0D1117" 
                        CornerRadius="6" 
                        Padding="10,6">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                        <TextBlock Text="â±" FontSize="12" Foreground="#8B949E"/>
                        <TextBlock Text="{Binding ElapsedMs, StringFormat={}{0} ms}"
                                   Foreground="#C9D1D9"
                                   FontSize="12"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>
                
                <!-- Size -->
                <Border Background="#0D1117" 
                        CornerRadius="6" 
                        Padding="10,6">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                        <TextBlock Text="ðŸ“¦" FontSize="12" Foreground="#8B949E"/>
                        <TextBlock Text="{Binding SizeBytes, StringFormat={}{0} B}"
                                   Foreground="#C9D1D9"
                                   FontSize="12"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Error Message -->
        <Border Grid.Row="0" 
                Padding="16,12"
                Background="#3D1D1D"
                CornerRadius="8"
                Margin="12"
                BorderBrush="#F85149"
                BorderThickness="1"
                IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
            <StackPanel Orientation="Horizontal" Spacing="10">
                <TextBlock Text="âš " FontSize="16" Foreground="#F85149"/>
                <TextBlock Text="{Binding ErrorMessage}" 
                           Foreground="#F85149"
                           TextWrapping="Wrap"
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Response Content -->
        <Border Grid.Row="1" 
                IsVisible="{Binding HasResponse}"
                Background="#0D1117"
                CornerRadius="0,0,8,8"
                BorderBrush="#30363D"
                BorderThickness="1,0,1,1"
                Margin="12,0,12,12">
            <TabControl Background="Transparent" Padding="8">
                <TabControl.Styles>
                    <Style Selector="TabItem">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="#8B949E"/>
                        <Setter Property="Padding" Value="16,10"/>
                        <Setter Property="FontSize" Value="13"/>
                    </Style>
                    <Style Selector="TabItem:selected">
                        <Setter Property="Foreground" Value="#F0F6FC"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                    </Style>
                </TabControl.Styles>
                
                <!-- Body Tab -->
                <TabItem Header="Body">
                    <ScrollViewer Margin="8">
                        <TextBox Text="{Binding FormattedBody, Mode=OneWay}"
                                 IsReadOnly="True"
                                 FontFamily="JetBrains Mono, Consolas, monospace"
                                 FontSize="12"
                                 TextWrapping="NoWrap"
                                 AcceptsReturn="True"
                                 Background="Transparent"
                                 Foreground="#C9D1D9"
                                 BorderThickness="0"
                                 Padding="8"/>
                    </ScrollViewer>
                </TabItem>

                <!-- Headers Tab -->
                <TabItem Header="Headers">
                    <ScrollViewer Margin="8">
                        <TextBox Text="{Binding HeadersText, Mode=OneWay}"
                                 IsReadOnly="True"
                                 FontFamily="JetBrains Mono, Consolas, monospace"
                                 FontSize="12"
                                 TextWrapping="NoWrap"
                                 AcceptsReturn="True"
                                 Background="Transparent"
                                 Foreground="#C9D1D9"
                                 BorderThickness="0"
                                 Padding="8"/>
                    </ScrollViewer>
                </TabItem>
            </TabControl>
        </Border>

        <!-- No Response Placeholder -->
        <Border Grid.Row="1" 
                IsVisible="{Binding !HasResponse}"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Margin="12">
            <StackPanel HorizontalAlignment="Center" Spacing="16">
                <Border Background="#21262D" 
                        CornerRadius="50" 
                        Width="80" Height="80"
                        HorizontalAlignment="Center">
                    <TextBlock Text="ðŸ“¡" 
                               FontSize="32" 
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Border>
                <TextBlock Text="No Response Yet" 
                           FontSize="18" 
                           FontWeight="SemiBold"
                           Foreground="#8B949E"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Send a request to see the response here" 
                           Foreground="#484F58"
                           FontSize="13"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
