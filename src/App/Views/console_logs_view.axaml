<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:App.ViewModels"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="200"
             x:Class="App.Views.console_logs_view"
             x:DataType="vm:console_logs_view_model">

    <Grid RowDefinitions="Auto,*">
        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource ButtonBackgroundBrush}" Padding="10">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock Grid.Column="0"
                           Text="Console Output" 
                           FontWeight="Bold" 
                           FontSize="14"
                           Foreground="{DynamicResource TextPrimaryBrush}"/>
                
                <Button Grid.Column="1" 
                        Command="{Binding ClearLogsCommand}"
                        Content="Clear"
                        Padding="8,3"
                        FontSize="11"/>
            </Grid>
        </Border>

        <!-- Logs List -->
        <ScrollViewer Grid.Row="1" Background="{DynamicResource PanelBackgroundBrush}">
            <ItemsControl ItemsSource="{Binding Logs}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="vm:console_log_item_view_model">
                        <Border Padding="10,5" 
                                BorderBrush="{DynamicResource BorderBrush}" 
                                BorderThickness="0,0,0,1">
                            <Grid ColumnDefinitions="Auto,Auto,*">
                                <!-- Level Icon -->
                                <TextBlock Grid.Column="0"
                                           Text="{Binding LevelIcon}"
                                           Foreground="{Binding LevelColor}"
                                           FontFamily="Consolas"
                                           FontSize="12"
                                           Margin="0,0,8,0"
                                           VerticalAlignment="Center"/>
                                
                                <!-- Timestamp -->
                                <TextBlock Grid.Column="1"
                                           Text="{Binding Timestamp, StringFormat={}{0:HH:mm:ss.fff}}"
                                           Foreground="{DynamicResource TextTertiaryBrush}"
                                           FontFamily="Consolas"
                                           FontSize="11"
                                           Margin="0,0,10,0"
                                           VerticalAlignment="Center"/>
                                
                                <!-- Message -->
                                <TextBlock Grid.Column="2"
                                           Text="{Binding Message}"
                                           Foreground="{DynamicResource ButtonTextBrush}"
                                           FontFamily="Consolas"
                                           FontSize="12"
                                           TextWrapping="Wrap"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Empty State -->
        <Border Grid.Row="1" 
                Background="{DynamicResource PanelBackgroundBrush}" 
                IsVisible="{Binding !HasLogs}">
            <TextBlock Text="No console output"
                       Foreground="{DynamicResource TextTertiaryBrush}"
                       FontSize="12"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
        </Border>
    </Grid>
</UserControl>
